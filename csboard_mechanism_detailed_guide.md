# CSBoard ë©”ì»¤ë‹ˆì¦˜ ìƒì„¸ ê°€ì´ë“œ

## ëª©ì°¨
1. [CSBoard ì‹œìŠ¤í…œ ê°œìš”](#1-csboard-ì‹œìŠ¤í…œ-ê°œìš”)
2. [ë¬¸ì˜ ìƒì„± í”„ë¡œì„¸ìŠ¤](#2-ë¬¸ì˜-ìƒì„±-í”„ë¡œì„¸ìŠ¤)
3. [ë¬¸ì˜ ì¡°íšŒ ë° ê´€ë¦¬ ë©”ì»¤ë‹ˆì¦˜](#3-ë¬¸ì˜-ì¡°íšŒ-ë°-ê´€ë¦¬-ë©”ì»¤ë‹ˆì¦˜)
4. [ë‹µë³€ ì‹œìŠ¤í…œ](#4-ë‹µë³€-ì‹œìŠ¤í…œ)
5. [ê¶Œí•œ ê´€ë¦¬ ë° ë³´ì•ˆ](#5-ê¶Œí•œ-ê´€ë¦¬-ë°-ë³´ì•ˆ)
6. [í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ìƒì„¸](#6-í”„ë¡ íŠ¸ì—”ë“œ-êµ¬í˜„-ìƒì„¸)
7. [ë°±ì—”ë“œ êµ¬í˜„ ìƒì„¸](#7-ë°±ì—”ë“œ-êµ¬í˜„-ìƒì„¸)
8. [ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë° ê´€ê³„](#8-ë°ì´í„°ë² ì´ìŠ¤-ìŠ¤í‚¤ë§ˆ-ë°-ê´€ê³„)
9. [ë‹¤ë¥¸ ì‹œìŠ¤í…œê³¼ì˜ í†µí•©](#9-ë‹¤ë¥¸-ì‹œìŠ¤í…œê³¼ì˜-í†µí•©)
10. [ì„±ëŠ¥ ìµœì í™” ë° í™•ì¥ì„±](#10-ì„±ëŠ¥-ìµœì í™”-ë°-í™•ì¥ì„±)

## 1. CSBoard ì‹œìŠ¤í…œ ê°œìš”

CSBoard(Customer Service Board) ì‹œìŠ¤í…œì€ ì‚¬ìš©ìì™€ ê´€ë¦¬ì ê°„ì˜ ì†Œí†µì„ ìœ„í•œ Q&A ê²Œì‹œíŒ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ ì‹œìŠ¤í…œì€ ì‚¬ìš©ìê°€ ì§ˆë¬¸ì´ë‚˜ ë¬¸ì˜ì‚¬í•­ì„ ë“±ë¡í•˜ê³ , ê´€ë¦¬ìë‚˜ ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ì´ì— ë‹µë³€í•  ìˆ˜ ìˆëŠ” í”Œë«í¼ì…ë‹ˆë‹¤.

### 1.1 ì‹œìŠ¤í…œ ëª©ì 

CSBoard ì‹œìŠ¤í…œì˜ ì£¼ìš” ëª©ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

- ì‚¬ìš©ìê°€ ì„œë¹„ìŠ¤ ì´ìš© ì¤‘ ë°œìƒí•˜ëŠ” ì§ˆë¬¸ì´ë‚˜ ë¬¸ì œë¥¼ ë“±ë¡í•  ìˆ˜ ìˆëŠ” ê³µê°„ ì œê³µ
- ê´€ë¦¬ìê°€ ì‚¬ìš©ìì˜ ë¬¸ì˜ì— íš¨ìœ¨ì ìœ¼ë¡œ ì‘ë‹µí•  ìˆ˜ ìˆëŠ” ì²´ê³„ êµ¬ì¶•
- ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ê³¼ ë‹µë³€ì„ ê³µìœ í•˜ì—¬ ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ì—ê²Œë„ ë„ì›€ ì œê³µ
- ì‚¬ìš©ì í”¼ë“œë°±ì„ ìˆ˜ì§‘í•˜ê³  ì„œë¹„ìŠ¤ ê°œì„ ì— í™œìš©

### 1.2 ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œ

CSBoard ì‹œìŠ¤í…œì€ ë‹¤ìŒê³¼ ê°™ì€ ì£¼ìš” êµ¬ì„± ìš”ì†Œë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤:

1. **CSBoardEntity**: ë¬¸ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” í•µì‹¬ ë°ì´í„° ëª¨ë¸
2. **CSBoardReplyEntity**: ë¬¸ì˜ì— ëŒ€í•œ ë‹µë³€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ëª¨ë¸
3. **CSBoardController**: ë¬¸ì˜ ê´€ë ¨ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
4. **CSBoardService**: ë¬¸ì˜ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤
5. **CSBoardReplyService**: ë‹µë³€ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤
6. **CSBoardRepository**: ë¬¸ì˜ ë°ì´í„°ì— ëŒ€í•œ ë°ì´í„°ë² ì´ìŠ¤ ì•¡ì„¸ìŠ¤ë¥¼ ë‹´ë‹¹
7. **CSBoardReplyRepository**: ë‹µë³€ ë°ì´í„°ì— ëŒ€í•œ ë°ì´í„°ë² ì´ìŠ¤ ì•¡ì„¸ìŠ¤ë¥¼ ë‹´ë‹¹

### 1.3 ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

CSBoard ì‹œìŠ¤í…œì€ Spring Boot ê¸°ë°˜ì˜ MVC ì•„í‚¤í…ì²˜ë¥¼ ë”°ë¥´ê³  ìˆìœ¼ë©°, ë‹¤ìŒê³¼ ê°™ì€ ê³„ì¸µ êµ¬ì¡°ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

- **í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ**: CSBoardControllerê°€ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ë·°ë¥¼ ë°˜í™˜
- **ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì¸µ**: CSBoardServiceì™€ CSBoardReplyServiceê°€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬
- **ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µ**: CSBoardRepositoryì™€ CSBoardReplyRepositoryê°€ ë°ì´í„°ë² ì´ìŠ¤ ì•¡ì„¸ìŠ¤ë¥¼ ë‹´ë‹¹
- **ë°ì´í„° ëª¨ë¸**: CSBoardEntityì™€ CSBoardReplyEntityê°€ ë°ì´í„° êµ¬ì¡°ë¥¼ ì •ì˜

## 2. ë¬¸ì˜ ìƒì„± í”„ë¡œì„¸ìŠ¤

ì‚¬ìš©ìê°€ ìƒˆë¡œìš´ ë¬¸ì˜ë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

### 2.1 ë¬¸ì˜ ì‘ì„± í¼ ì ‘ê·¼

1. ì‚¬ìš©ìê°€ CSBoard ëª©ë¡ í˜ì´ì§€ì—ì„œ "ìƒˆ ì§ˆë¬¸ ë“±ë¡" ë²„íŠ¼ì„ í´ë¦­
2. CSBoardControllerì˜ `showRegisterForm` ë©”ì†Œë“œê°€ í˜¸ì¶œë¨
3. ë©”ì†Œë“œëŠ” ë¬¸ì˜ ì‘ì„± í¼ í˜ì´ì§€(register.html)ë¥¼ ë°˜í™˜

```java
// CSBoardController.java
@GetMapping("/register")
public String showRegisterForm() {
    return "csboard/register";
}
```

### 2.2 ë¬¸ì˜ ë°ì´í„° ì…ë ¥

ì‚¬ìš©ìëŠ” ë¬¸ì˜ ì‘ì„± í¼ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤:

1. **ì œëª©(title)**: ë¬¸ì˜ì˜ ì œëª©
2. **ë‚´ìš©(content)**: ë¬¸ì˜ì˜ ìƒì„¸ ë‚´ìš©

í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤:
- ì œëª©ê³¼ ë‚´ìš©ì´ ë¹„ì–´ìˆì§€ ì•Šì€ì§€ í™•ì¸ (HTML5ì˜ required ì†ì„± ì‚¬ìš©)

### 2.3 ë¬¸ì˜ ì œì¶œ ë° ì²˜ë¦¬

1. ì‚¬ìš©ìê°€ í¼ì„ ì œì¶œí•˜ë©´ CSBoardControllerì˜ `createFromForm` ë©”ì†Œë“œê°€ í˜¸ì¶œë¨
2. ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰:
   - ì‚¬ìš©ì ì¸ì¦ ì •ë³´ í™•ì¸
   - CSBoardDTO ê°ì²´ì— ì‚¬ìš©ì ì´ë¦„ ì„¤ì •
   - CSBoardServiceì˜ `createQBoard` ë©”ì†Œë“œ í˜¸ì¶œ

```java
// CSBoardController.java
@PostMapping("/register")
public String createFromForm(@ModelAttribute CSBoardDTO dto, @AuthenticationPrincipal PrincipalDetail principalDetail) {
    // ì‚¬ìš©ì ì¸ì¦ í™•ì¸
    if (principalDetail != null) {
        dto.setWriter(principalDetail.getUsername());
    }

    csBoardService.createQBoard(dto);
    return "redirect:/csboard/list";
}
```

### 2.4 ì„œë¹„ìŠ¤ ê³„ì¸µ ì²˜ë¦¬

CSBoardServiceì˜ `createQBoard` ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:

1. CSBoardDTOë¥¼ CSBoardEntityë¡œ ë³€í™˜
2. í•„ìš”í•œ ì¶”ê°€ ì •ë³´ ì„¤ì • (ì˜ˆ: ì¡°íšŒìˆ˜ ì´ˆê¸°í™”)
3. CSBoardRepositoryë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
4. ì €ì¥ëœ ì—”í‹°í‹°ë¥¼ ë‹¤ì‹œ DTOë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜

```java
// CSBoardServiceImpl.java
@Override
public CSBoardDTO createQBoard(CSBoardDTO dto) {
    CSBoardEntity board = new CSBoardEntity();
    board.setTitle(dto.getTitle());
    board.setWriter(dto.getWriter());
    board.setContent(dto.getContent());
    return toDTO(csBoardRepository.save(board));
}
```

### 2.5 ë¬¸ì˜ ìƒì„± ì™„ë£Œ

ë¬¸ì˜ ìƒì„±ì´ ì™„ë£Œë˜ë©´ ì‚¬ìš©ìëŠ” CSBoard ëª©ë¡ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë˜ë©°, ìƒˆë¡œ ì‘ì„±í•œ ë¬¸ì˜ë¥¼ í¬í•¨í•œ ëª¨ë“  ë¬¸ì˜ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 3. ë¬¸ì˜ ì¡°íšŒ ë° ê´€ë¦¬ ë©”ì»¤ë‹ˆì¦˜

ì‚¬ìš©ìì™€ ê´€ë¦¬ìê°€ ë¬¸ì˜ë¥¼ ì¡°íšŒí•˜ê³  ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì— ëŒ€í•œ ìƒì„¸ ë‚´ìš©ì…ë‹ˆë‹¤.

### 3.1 ë¬¸ì˜ ëª©ë¡ ì¡°íšŒ

1. ì‚¬ìš©ìê°€ CSBoard ëª©ë¡ í˜ì´ì§€ì— ì ‘ê·¼í•˜ë©´ CSBoardControllerì˜ `showList` ë©”ì†Œë“œê°€ í˜¸ì¶œë¨
2. ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰:
   - í˜ì´ì§€ ë²ˆí˜¸ì™€ ê²€ìƒ‰ í‚¤ì›Œë“œ íŒŒë¼ë¯¸í„° ì²˜ë¦¬
   - Pageable ê°ì²´ ìƒì„±
   - ê²€ìƒ‰ í‚¤ì›Œë“œê°€ ìˆëŠ” ê²½ìš° CSBoardServiceì˜ `searchCSByTitle` ë©”ì†Œë“œ í˜¸ì¶œ
   - ê²€ìƒ‰ í‚¤ì›Œë“œê°€ ì—†ëŠ” ê²½ìš° CSBoardServiceì˜ `getCSPage` ë©”ì†Œë“œ í˜¸ì¶œ
   - í˜ì´ì§• ì •ë³´ ê³„ì‚° ë° ëª¨ë¸ì— ì¶”ê°€

```java
// CSBoardController.java
@GetMapping("/list")
public String showList(@RequestParam(required = false) String keyword,
                      @RequestParam(defaultValue = "0") int page,
                      Model model) {
    // í˜ì´ì§• ì²˜ë¦¬
    Pageable pageable = PageRequest.of(page, 10);

    // ê²€ìƒ‰ ë˜ëŠ” ì „ì²´ ì¡°íšŒ
    Page<CSBoardDTO> csPage;
    if (keyword != null && !keyword.isEmpty()) {
        csPage = csBoardService.searchCSByTitle(keyword, pageable);
    } else {
        csPage = csBoardService.getCSPage(pageable);
    }

    // í˜ì´ì§• ì •ë³´ ê³„ì‚°
    int totalPages = csPage.getTotalPages();

    // ëª¨ë¸ì— ë°ì´í„° ì¶”ê°€
    model.addAttribute("csPage", csPage);
    model.addAttribute("currentPage", page);
    model.addAttribute("totalPages", totalPages);
    model.addAttribute("keyword", keyword);

    return "csboard/list";
}
```

### 3.2 ë¬¸ì˜ ìƒì„¸ ì¡°íšŒ

1. ì‚¬ìš©ìê°€ ëª©ë¡ì—ì„œ íŠ¹ì • ë¬¸ì˜ë¥¼ í´ë¦­í•˜ë©´ CSBoardControllerì˜ `view` ë©”ì†Œë“œê°€ í˜¸ì¶œë¨
2. ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰:
   - CSBoardServiceì˜ `getBoard` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë¬¸ì˜ ì •ë³´ ì¡°íšŒ (ì¡°íšŒìˆ˜ ì¦ê°€)
   - CSBoardReplyServiceì˜ `getRepliesByCSBoard` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë‹µë³€ ëª©ë¡ ì¡°íšŒ
   - í˜„ì¬ ì‚¬ìš©ìê°€ ë‹µë³€ì„ ì‘ì„±í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸ (ì›ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì)
   - ëª¨ë¸ì— ë°ì´í„° ì¶”ê°€

```java
// CSBoardController.java
@GetMapping("/view")
public String view(@RequestParam Long id, Model model, @AuthenticationPrincipal PrincipalDetail principalDetail) {
    // ë¬¸ì˜ ì •ë³´ ì¡°íšŒ (ì¡°íšŒìˆ˜ ì¦ê°€)
    CSBoardDTO dto = csBoardService.getBoard(id, true);

    // ë‹µë³€ ëª©ë¡ ì¡°íšŒ
    List<CSBoardReplyDTO> replies = csBoardReplyService.getRepliesByCSBoard(id);

    // ë‹µë³€ ê¶Œí•œ í™•ì¸
    boolean canReply = false;
    if (principalDetail != null) {
        String username = principalDetail.getUsername();
        // ì›ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìì¸ ê²½ìš° ë‹µë³€ ê°€ëŠ¥
        canReply = username.equals(dto.getWriter()) || principalDetail.getUser().getRole().equals("ADMIN");
    }

    // ëª¨ë¸ì— ë°ì´í„° ì¶”ê°€
    model.addAttribute("cs", dto);
    model.addAttribute("replies", replies);
    model.addAttribute("canReply", canReply);

    return "csboard/view";
}
```

### 3.3 ë¬¸ì˜ ìˆ˜ì •

1. ì‚¬ìš©ìê°€ ë¬¸ì˜ ìƒì„¸ í˜ì´ì§€ì—ì„œ "ìˆ˜ì •" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ CSBoardControllerì˜ `updateForm` ë©”ì†Œë“œê°€ í˜¸ì¶œë¨
2. ë©”ì†Œë“œëŠ” CSBoardServiceì˜ `getBoard` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë¬¸ì˜ ì •ë³´ë¥¼ ì¡°íšŒí•˜ê³  ìˆ˜ì • í¼ í˜ì´ì§€ë¥¼ ë°˜í™˜
3. ì‚¬ìš©ìê°€ ìˆ˜ì • í¼ì„ ì œì¶œí•˜ë©´ CSBoardControllerì˜ `updateSubmit` ë©”ì†Œë“œê°€ í˜¸ì¶œë¨
4. ë©”ì†Œë“œëŠ” CSBoardServiceì˜ `updateQBoard` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë¬¸ì˜ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸

```java
// CSBoardController.java
@GetMapping("/update")
public String updateForm(@RequestParam Long id, Model model) {
    CSBoardDTO dto = csBoardService.getBoard(id, false);
    model.addAttribute("cs", dto);
    return "csboard/update";
}

@PostMapping("/update/submit")
public String updateSubmit(@ModelAttribute CSBoardDTO dto) {
    csBoardService.updateQBoard(dto.getId(), dto);
    return "redirect:/csboard/view?id=" + dto.getId();
}
```

### 3.4 ë¬¸ì˜ ì‚­ì œ

1. ì‚¬ìš©ìê°€ ë¬¸ì˜ ìƒì„¸ í˜ì´ì§€ì—ì„œ "ì‚­ì œ" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ JavaScript í•¨ìˆ˜ `deleteCS`ê°€ í˜¸ì¶œë¨
2. í•¨ìˆ˜ëŠ” í™•ì¸ ëŒ€í™”ìƒìë¥¼ í‘œì‹œí•˜ê³ , ì‚¬ìš©ìê°€ í™•ì¸í•˜ë©´ CSBoardControllerì˜ `delete` ë©”ì†Œë“œë¥¼ í˜¸ì¶œ
3. ë©”ì†Œë“œëŠ” CSBoardServiceì˜ `deleteQBoard` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë¬¸ì˜ë¥¼ ì‚­ì œ

```java
// CSBoardController.java
@DeleteMapping("/delete/{id}")
public String delete(@PathVariable Long id) {
    csBoardService.deleteQBoard(id);
    return "redirect:/csboard/list";
}
```

### 3.5 ë¬¸ì˜ ê²€ìƒ‰

1. ì‚¬ìš©ìê°€ ëª©ë¡ í˜ì´ì§€ì˜ ê²€ìƒ‰ í¼ì— í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ê³  ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ CSBoardControllerì˜ `showList` ë©”ì†Œë“œê°€ í˜¸ì¶œë¨
2. ë©”ì†Œë“œëŠ” ê²€ìƒ‰ í‚¤ì›Œë“œë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ CSBoardServiceì˜ `searchCSByTitle` ë©”ì†Œë“œë¥¼ í˜¸ì¶œ
3. ë©”ì†Œë“œëŠ” ì œëª©ì— í‚¤ì›Œë“œê°€ í¬í•¨ëœ ë¬¸ì˜ë¥¼ ê²€ìƒ‰í•˜ì—¬ í˜ì´ì§• ì²˜ë¦¬ëœ ê²°ê³¼ë¥¼ ë°˜í™˜

```java
// CSBoardServiceImpl.java
@Override
public Page<CSBoardDTO> searchCSByTitle(String keyword, Pageable pageable) {
    return csBoardRepository
            .findByTitleContaining(keyword, pageable)
            .map(this::toDTO);
}
```

## 4. ë‹µë³€ ì‹œìŠ¤í…œ

CSBoard ì‹œìŠ¤í…œì˜ í•µì‹¬ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ëŠ” ë¬¸ì˜ì— ëŒ€í•œ ë‹µë³€ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ì´ ì„¹ì…˜ì—ì„œëŠ” ë‹µë³€ ìƒì„±, ì¡°íšŒ, ê´€ë¦¬ ë“±ì˜ ë©”ì»¤ë‹ˆì¦˜ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

### 4.1 ë‹µë³€ ìƒì„±

1. ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ì(ì›ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì)ê°€ ë¬¸ì˜ ìƒì„¸ í˜ì´ì§€ì˜ ë‹µë³€ í¼ì— ë‚´ìš©ì„ ì…ë ¥í•˜ê³  ì œì¶œí•˜ë©´ CSBoardControllerì˜ `addReply` ë©”ì†Œë“œê°€ í˜¸ì¶œë¨
2. ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰:
   - ì‚¬ìš©ì ì¸ì¦ ì •ë³´ í™•ì¸
   - ë‹µë³€ ê¶Œí•œ í™•ì¸ (ì›ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì)
   - CSBoardReplyDTO ê°ì²´ ìƒì„± ë° ë°ì´í„° ì„¤ì •
   - CSBoardReplyServiceì˜ `createReply` ë©”ì†Œë“œ í˜¸ì¶œ

```java
// CSBoardController.java
@PostMapping("/reply/{id}")
public String addReply(@PathVariable Long id, @RequestParam String content,
                      @AuthenticationPrincipal PrincipalDetail principalDetail,
                      Model model) {
    // ì‚¬ìš©ì ì¸ì¦ í™•ì¸
    if (principalDetail == null) {
        return "redirect:/csboard/view?id=" + id + "&error=unauthorized";
    }

    // ë¬¸ì˜ ì •ë³´ ì¡°íšŒ
    CSBoardDTO csBoard = csBoardService.getBoard(id, false);

    // ë‹µë³€ ê¶Œí•œ í™•ì¸
    String username = principalDetail.getUsername();
    boolean isAuthor = username.equals(csBoard.getWriter());
    boolean isAdmin = principalDetail.getUser().getRole().equals("ADMIN");

    if (!isAuthor && !isAdmin) {
        return "redirect:/csboard/view?id=" + id + "&error=unauthorized";
    }

    // ë‹µë³€ DTO ìƒì„±
    CSBoardReplyDTO replyDTO = new CSBoardReplyDTO();
    replyDTO.setCsBoardId(id);
    replyDTO.setContent(content);
    replyDTO.setWriter(username);
    replyDTO.setUser(principalDetail.getUser());

    // ë‹µë³€ ìƒì„±
    csBoardReplyService.createReply(replyDTO);

    return "redirect:/csboard/view?id=" + id;
}
```

### 4.2 ë‹µë³€ ì„œë¹„ìŠ¤ ì²˜ë¦¬

CSBoardReplyServiceì˜ `createReply` ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:

1. CSBoardReplyDTOë¥¼ CSBoardReplyEntityë¡œ ë³€í™˜ (dtoToEntity ë©”ì†Œë“œ ì‚¬ìš©)
2. CSBoardReplyRepositoryë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
3. ì €ì¥ëœ ì—”í‹°í‹°ë¥¼ ë‹¤ì‹œ DTOë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜

```java
// CSBoardReplyServiceImpl.java
@Override
@Transactional
public CSBoardReplyDTO createReply(CSBoardReplyDTO replyDTO) {
    CSBoardReplyEntity entity = dtoToEntity(replyDTO);
    CSBoardReplyEntity savedEntity = replyRepository.save(entity);
    return entityToDto(savedEntity);
}
```

### 4.3 ë‹µë³€ ì¡°íšŒ

1. ì‚¬ìš©ìê°€ ë¬¸ì˜ ìƒì„¸ í˜ì´ì§€ì— ì ‘ê·¼í•˜ë©´ CSBoardControllerì˜ `view` ë©”ì†Œë“œê°€ í˜¸ì¶œë¨
2. ë©”ì†Œë“œëŠ” CSBoardReplyServiceì˜ `getRepliesByCSBoard` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ í•´ë‹¹ ë¬¸ì˜ì— ëŒ€í•œ ëª¨ë“  ë‹µë³€ì„ ì¡°íšŒ
3. ì¡°íšŒëœ ë‹µë³€ ëª©ë¡ì€ ëª¨ë¸ì— ì¶”ê°€ë˜ì–´ ë·°ì— ì „ë‹¬ë¨

```java
// CSBoardReplyServiceImpl.java
@Override
@Transactional(readOnly = true)
public List<CSBoardReplyDTO> getRepliesByCSBoard(Long csBoardId) {
    CSBoardEntity csBoard = csBoardRepository.findById(csBoardId)
            .orElseThrow(() -> new RuntimeException("CSBoard not found with id: " + csBoardId));

    List<CSBoardReplyEntity> replies = replyRepository.findByCsBoardOrderByRegDateDesc(csBoard);

    return replies.stream()
            .map(this::entityToDto)
            .collect(Collectors.toList());
}
```

### 4.4 ë‹µë³€ ì‚­ì œ

1. ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìê°€ ë‹µë³€ ì˜†ì˜ "ì‚­ì œ" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ JavaScript í•¨ìˆ˜ `deleteReply`ê°€ í˜¸ì¶œë¨
2. í•¨ìˆ˜ëŠ” í™•ì¸ ëŒ€í™”ìƒìë¥¼ í‘œì‹œí•˜ê³ , ì‚¬ìš©ìê°€ í™•ì¸í•˜ë©´ CSBoardControllerì˜ `deleteReply` ë©”ì†Œë“œë¥¼ í˜¸ì¶œ
3. ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰:
   - ì‚¬ìš©ì ì¸ì¦ ì •ë³´ í™•ì¸
   - ë‹µë³€ ì‚­ì œ ê¶Œí•œ í™•ì¸ (ë‹µë³€ ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì)
   - CSBoardReplyServiceì˜ `deleteReply` ë©”ì†Œë“œ í˜¸ì¶œ

```java
// CSBoardController.java
@DeleteMapping("/reply/delete/{id}")
public String deleteReply(@PathVariable Long id, @RequestParam Long csBoardId,
                         @AuthenticationPrincipal PrincipalDetail principalDetail) {
    // ê¶Œí•œ í™•ì¸ ë¡œì§ ìƒëµ...

    // ë‹µë³€ ì‚­ì œ
    csBoardReplyService.deleteReply(id);

    return "redirect:/csboard/view?id=" + csBoardId;
}
```

## 5. ê¶Œí•œ ê´€ë¦¬ ë° ë³´ì•ˆ

CSBoard ì‹œìŠ¤í…œì€ ë‹¤ì–‘í•œ ê¶Œí•œ ê´€ë¦¬ ë° ë³´ì•ˆ ë©”ì»¤ë‹ˆì¦˜ì„ í†µí•´ ì•ˆì „í•œ ë¬¸ì˜ ë° ë‹µë³€ ê´€ë¦¬ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.

### 5.1 ì‚¬ìš©ì ì¸ì¦

1. Spring Securityë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ ì²˜ë¦¬
2. ì¸ì¦ëœ ì‚¬ìš©ì ì •ë³´ëŠ” PrincipalDetail ê°ì²´ë¥¼ í†µí•´ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥
3. ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

```java
// CustomSecurityConfig.java (ì¼ë¶€)
@Bean
public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
    http
        // ... ë‹¤ë¥¸ ì„¤ì •ë“¤ ...
        .authorizeHttpRequests(auth -> auth
            .requestMatchers("/", "/login", "/userinfo/**", "/recipe/**", "/csboard/**", "/notice/**", "/review/**")
            .permitAll()
            .anyRequest().authenticated()
        );

    return http.build();
}
```

### 5.2 ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´

1. ë¬¸ì˜ ìˆ˜ì • ë° ì‚­ì œ: ì›ì‘ì„±ìë§Œ ê°€ëŠ¥
2. ë‹µë³€ ì‘ì„±: ì›ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ê°€ëŠ¥
3. ë‹µë³€ ì‚­ì œ: ë‹µë³€ ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ê°€ëŠ¥

ì´ëŸ¬í•œ ê¶Œí•œ ê²€ì‚¬ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì†Œë“œì—ì„œ ìˆ˜í–‰ë©ë‹ˆë‹¤:

```java
// ì˜ˆ: ë‹µë³€ ì‘ì„± ê¶Œí•œ í™•ì¸
String username = principalDetail.getUsername();
boolean isAuthor = username.equals(csBoard.getWriter());
boolean isAdmin = principalDetail.getUser().getRole().equals("ADMIN");

if (!isAuthor && !isAdmin) {
    return "redirect:/csboard/view?id=" + id + "&error=unauthorized";
}
```

### 5.3 CSRF ë³´í˜¸

1. Spring Securityì˜ CSRF ë³´í˜¸ ê¸°ëŠ¥ í™œì„±í™”
2. ëª¨ë“  POST, PUT, DELETE ìš”ì²­ì— CSRF í† í° í¬í•¨
3. Thymeleaf í…œí”Œë¦¿ì—ì„œ ìë™ìœ¼ë¡œ CSRF í† í° ì²˜ë¦¬

```html
<!-- ì˜ˆ: í¼ì— ìë™ìœ¼ë¡œ CSRF í† í° í¬í•¨ -->
<form th:action="@{/csboard/register}" method="post">
    <!-- CSRF í† í°ì€ Thymeleafì— ì˜í•´ ìë™ìœ¼ë¡œ ì¶”ê°€ë¨ -->
    <!-- í¼ í•„ë“œë“¤... -->
</form>
```

### 5.4 ì…ë ¥ ë°ì´í„° ê²€ì¦

1. ì„œë²„ ì¸¡ì—ì„œ ì…ë ¥ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
2. HTML ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬ë¡œ XSS ê³µê²© ë°©ì§€
3. ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°í™”ë¡œ SQL ì¸ì ì…˜ ë°©ì§€

```java
// ì˜ˆ: ì…ë ¥ ë°ì´í„° ê²€ì¦
if (dto.getTitle() == null || dto.getTitle().trim().isEmpty()) {
    throw new IllegalArgumentException("Title cannot be empty");
}

if (dto.getContent() == null || dto.getContent().trim().isEmpty()) {
    throw new IllegalArgumentException("Content cannot be empty");
}
```

## 6. í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ìƒì„¸

CSBoard ì‹œìŠ¤í…œì˜ í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ì— ëŒ€í•œ ìƒì„¸ ë‚´ìš©ì…ë‹ˆë‹¤.

### 6.1 ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ êµ¬ì„±

CSBoard ì‹œìŠ¤í…œì˜ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í˜ì´ì§€ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

1. **ëª©ë¡ í˜ì´ì§€(list.html)**: ëª¨ë“  ë¬¸ì˜ ëª©ë¡ì„ í‘œì‹œí•˜ê³  ê²€ìƒ‰ ë° í˜ì´ì§• ê¸°ëŠ¥ ì œê³µ
2. **ìƒì„¸ í˜ì´ì§€(view.html)**: íŠ¹ì • ë¬¸ì˜ì˜ ìƒì„¸ ë‚´ìš©ê³¼ ë‹µë³€ì„ í‘œì‹œí•˜ê³  ë‹µë³€ ì‘ì„± í¼ ì œê³µ
3. **ë“±ë¡ í˜ì´ì§€(register.html)**: ìƒˆë¡œìš´ ë¬¸ì˜ë¥¼ ì‘ì„±í•˜ëŠ” í¼ ì œê³µ
4. **ìˆ˜ì • í˜ì´ì§€(update.html)**: ê¸°ì¡´ ë¬¸ì˜ë¥¼ ìˆ˜ì •í•˜ëŠ” í¼ ì œê³µ

### 6.2 ë°˜ì‘í˜• ë””ìì¸

1. Bootstrap í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•œ ë°˜ì‘í˜• ë””ìì¸
2. ëª¨ë°”ì¼ ë° ë°ìŠ¤í¬í†± í™˜ê²½ì—ì„œ ìµœì í™”ëœ ë ˆì´ì•„ì›ƒ
3. ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸°ì— ë§ê²Œ ì¡°ì •ë˜ëŠ” UI ìš”ì†Œ

```html
<!-- ì˜ˆ: ë°˜ì‘í˜• ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ -->
<div class="card mx-auto shadow-lg border-0 rounded-4 p-5 bg-white" style="max-width: 760px;">
    <!-- ì¹´ë“œ ë‚´ìš© -->
</div>
```

### 6.3 ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ

1. ì§ê´€ì ì¸ ë„¤ë¹„ê²Œì´ì…˜ ë° ë²„íŠ¼ ë°°ì¹˜
2. ì ì ˆí•œ ì•„ì´ì½˜ ë° ì‹œê°ì  ìš”ì†Œ ì‚¬ìš©
3. í¼ ì…ë ¥ í•„ë“œì˜ ìœ íš¨ì„± ê²€ì‚¬ ë° í”¼ë“œë°±
4. í™•ì¸ ëŒ€í™”ìƒìë¥¼ í†µí•œ ì¤‘ìš” ì‘ì—… í™•ì¸

```javascript
// ì˜ˆ: ì‚­ì œ í™•ì¸ ëŒ€í™”ìƒì
function deleteCS() {
    const id = document.getElementById("csId").value;
    if (confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        fetch("/csboard/delete/" + id, {
            method: "DELETE"
        }).then(res => {
            if (res.ok) {
                alert("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
                window.location.href = "/csboard/list";
            } else {
                alert("ì‚­ì œ ì‹¤íŒ¨ ğŸ˜¥");
            }
        });
    }
}
```

### 6.4 í˜ì´ì§• ë° ê²€ìƒ‰ UI

1. í˜ì´ì§€ ë²ˆí˜¸ ë° ì´ì „/ë‹¤ìŒ ë²„íŠ¼ì„ í¬í•¨í•œ í˜ì´ì§• ì»¨íŠ¸ë¡¤
2. í˜„ì¬ í˜ì´ì§€ ê°•ì¡° í‘œì‹œ
3. ê²€ìƒ‰ í¼ ë° ê²°ê³¼ í‘œì‹œ
4. ê²€ìƒ‰ í‚¤ì›Œë“œ ìœ ì§€ ë° í˜ì´ì§€ ê°„ ì „ë‹¬

```html
<!-- ì˜ˆ: í˜ì´ì§• ì»¨íŠ¸ë¡¤ -->
<nav th:if="${totalPages > 0}" class="mt-4">
    <ul class="pagination justify-content-center">
        <!-- ì´ì „ ë²„íŠ¼ -->
        <li class="page-item rounded-pill overflow-hidden me-1" th:classappend="${currentPage == 0} ? 'disabled'">
            <a class="page-link border-0 fw-semibold"
               th:href="@{/csboard/list(page=${currentPage - 1}, keyword=${keyword})}">ì´ì „</a>
        </li>

        <!-- í˜ì´ì§€ ë²ˆí˜¸ -->
        <li class="page-item rounded-pill overflow-hidden mx-1"
            th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
            th:classappend="${i == currentPage} ? 'active'">
            <a class="page-link border-0 fw-semibold"
               th:href="@{/csboard/list(page=${i}, keyword=${keyword})}"
               th:text="${i + 1}">1</a>
        </li>

        <!-- ë‹¤ìŒ ë²„íŠ¼ -->
        <li class="page-item rounded-pill overflow-hidden ms-1" th:classappend="${currentPage + 1 >= totalPages} ? 'disabled'">
            <a class="page-link border-0 fw-semibold"
               th:href="@{/csboard/list(page=${currentPage + 1}, keyword=${keyword})}">ë‹¤ìŒ</a>
        </li>
    </ul>
</nav>
```

## 7. ë°±ì—”ë“œ êµ¬í˜„ ìƒì„¸

CSBoard ì‹œìŠ¤í…œì˜ ë°±ì—”ë“œ êµ¬í˜„ì— ëŒ€í•œ ìƒì„¸ ë‚´ìš©ì…ë‹ˆë‹¤.

### 7.1 ì—”í‹°í‹° êµ¬ì¡°

#### 7.1.1 CSBoardEntity

CSBoardEntityëŠ” ë¬¸ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” í•µì‹¬ ëª¨ë¸ì…ë‹ˆë‹¤:

```java
@Getter
@Setter
@Entity(name="cs_board")
public class CSBoardEntity {

    @Id
    @GeneratedValue(strategy= GenerationType.IDENTITY)
    private Long id;
    private String title;
    private String writer;
    @Column(length = 5000)
    private String content;
    private Long hitcount;
    private boolean secret;

    @CreationTimestamp
    @Column(name = "regdate", updatable = false)
    @DateTimeFormat(pattern="yyyy-MM-dd'T'HH:mm:ss")
    private LocalDateTime createdAt;

    public void change(String title, String content) {
        this.title = title;
        this.content = content;
    }

    public void updateHitcount() {
        this.hitcount = (this.hitcount == null ? 0 : this.hitcount) + 1;
    }
}
```

ì£¼ìš” í•„ë“œ ì„¤ëª…:
- `id`: ë¬¸ì˜ì˜ ê³ ìœ  ì‹ë³„ì
- `title`: ë¬¸ì˜ ì œëª©
- `writer`: ì‘ì„±ì ì´ë¦„
- `content`: ë¬¸ì˜ ë‚´ìš© (ìµœëŒ€ 5000ì)
- `hitcount`: ì¡°íšŒìˆ˜
- `secret`: ë¹„ë°€ê¸€ ì—¬ë¶€
- `createdAt`: ì‘ì„± ì‹œê°„

#### 7.1.2 CSBoardReplyEntity

CSBoardReplyEntityëŠ” ë¬¸ì˜ì— ëŒ€í•œ ë‹µë³€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ëª¨ë¸ì…ë‹ˆë‹¤:

```java
@Entity
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Table(name="csboard_reply")
public class CSBoardReplyEntity extends BaseEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "csboard_id")
    private CSBoardEntity csBoard;

    @Column(nullable = false, length = 1000)
    private String content;

    @Column(nullable = false)
    private String writer;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id")
    private UserEntity user;
}
```

ì£¼ìš” í•„ë“œ ì„¤ëª…:
- `id`: ë‹µë³€ì˜ ê³ ìœ  ì‹ë³„ì
- `csBoard`: ë‹µë³€ì´ ì†í•œ ë¬¸ì˜ (ë‹¤ëŒ€ì¼ ê´€ê³„)
- `content`: ë‹µë³€ ë‚´ìš© (ìµœëŒ€ 1000ì)
- `writer`: ë‹µë³€ ì‘ì„±ì ì´ë¦„
- `user`: ë‹µë³€ ì‘ì„±ì (ë‹¤ëŒ€ì¼ ê´€ê³„)

### 7.2 DTO êµ¬ì¡°

#### 7.2.1 CSBoardDTO

CSBoardDTOëŠ” ë¬¸ì˜ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ ê°ì²´ì…ë‹ˆë‹¤:

```java
@Getter
@Setter
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class CSBoardDTO {
    private Long id;
    private String title;
    private String writer;
    private String content;
    private LocalDateTime createdAt;
    private Long hitcount;
    private boolean secret;
}
```

#### 7.2.2 CSBoardReplyDTO

CSBoardReplyDTOëŠ” ë‹µë³€ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ ê°ì²´ì…ë‹ˆë‹¤:

```java
@Getter
@Setter
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class CSBoardReplyDTO {
    private Long id;
    private Long csBoardId;
    private String content;
    private String writer;
    private UserEntity user;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
}
```

### 7.3 ì„œë¹„ìŠ¤ ê³„ì¸µ êµ¬í˜„

#### 7.3.1 CSBoardService

CSBoardServiceëŠ” ë¬¸ì˜ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤:

```java
public interface CSBoardService {
    List<CSBoardDTO> getAllQBoards();
    CSBoardDTO getBoard(Long id);
    CSBoardDTO createQBoard(CSBoardDTO dto);
    void updateQBoard(Long id, CSBoardDTO dto);
    void deleteQBoard(Long id);
    CSBoardDTO getBoard(Long id, boolean increaseHitcount);

    // í˜ì´ì§• ì¶”ê°€
    Page<CSBoardDTO> getCSPage(Pageable pageable);
    Page<CSBoardDTO> searchCSByTitle(String keyword, Pageable pageable);
}
```

#### 7.3.2 CSBoardServiceImpl

CSBoardServiceImplì€ CSBoardService ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ì…ë‹ˆë‹¤:

```java
@Service
public class CSBoardServiceImpl implements CSBoardService {

    @Autowired
    private CSBoardRepository csBoardRepository;

    @Override
    public List<CSBoardDTO> getAllQBoards() {
        return csBoardRepository.findAll()
                .stream()
                .map(this::toDTO)
                .collect(Collectors.toList());
    }

    @Override
    public Page<CSBoardDTO> getCSPage(Pageable pageable) {
        return csBoardRepository.findAll(pageable)
                .map(this::toDTO);
    }

    @Override
    public Page<CSBoardDTO> searchCSByTitle(String keyword, Pageable pageable) {
        return csBoardRepository
                .findByTitleContaining(keyword, pageable)
                .map(this::toDTO);
    }

    @Override
    public CSBoardDTO getBoard(Long id) {
        return getBoard(id, true);
    }

    @Override
    public CSBoardDTO getBoard(Long id, boolean increaseHitcount) {
        CSBoardEntity entity = csBoardRepository.findById(id)
                .orElseThrow(() -> new RuntimeException("csBoard not found with id: " + id));

        if (increaseHitcount) {
            entity.updateHitcount();
            csBoardRepository.save(entity);
        }

        return toDTO(entity);
    }

    @Override
    public CSBoardDTO createQBoard(CSBoardDTO dto) {
        CSBoardEntity board = new CSBoardEntity();
        board.setTitle(dto.getTitle());
        board.setWriter(dto.getWriter());
        board.setContent(dto.getContent());
        return toDTO(csBoardRepository.save(board));
    }

    @Override
    public void updateQBoard(Long id, CSBoardDTO dto) {
        CSBoardEntity board = csBoardRepository.findById(id).orElseThrow();
        board.change(dto.getTitle(), dto.getContent());
        csBoardRepository.save(board);
    }

    @Override
    public void deleteQBoard(Long id) {
        csBoardRepository.deleteById(id);
    }

    private CSBoardDTO toDTO(CSBoardEntity board) {
        return CSBoardDTO.builder()
                .id(board.getId())
                .title(board.getTitle())
                .writer(board.getWriter())
                .content(board.getContent())
                .createdAt(board.getCreatedAt())
                .hitcount(board.getHitcount())
                .build();
    }
}
```

#### 7.3.3 CSBoardReplyService

CSBoardReplyServiceëŠ” ë‹µë³€ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤:

```java
public interface CSBoardReplyService {
    // Create a new reply
    CSBoardReplyDTO createReply(CSBoardReplyDTO replyDTO);

    // Get all replies for a csboard post
    List<CSBoardReplyDTO> getRepliesByCSBoard(Long csBoardId);

    // Update a reply
    CSBoardReplyDTO updateReply(Long id, CSBoardReplyDTO replyDTO);

    // Delete a reply
    void deleteReply(Long id);

    // Convert entity to DTO
    CSBoardReplyDTO entityToDto(CSBoardReplyEntity entity);

    // Convert DTO to entity
    CSBoardReplyEntity dtoToEntity(CSBoardReplyDTO dto);
}
```

### 7.4 ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬í˜„

CSBoardControllerëŠ” ë¬¸ì˜ ë° ë‹µë³€ ê´€ë ¨ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì…ë‹ˆë‹¤:

```java
@Controller
@RequestMapping("/csboard")
@Log4j2
public class CSBoardController {

    @Autowired
    private CSBoardService csBoardService;

    @Autowired
    private CSBoardReplyService csBoardReplyService;

    // ë¬¸ì˜ ë“±ë¡ í¼ í‘œì‹œ
    @GetMapping("/register")
    public String showRegisterForm() {
        return "csboard/register";
    }

    // ë¬¸ì˜ ë“±ë¡ ì²˜ë¦¬
    @PostMapping("/register")
    public String createFromForm(@ModelAttribute CSBoardDTO dto, @AuthenticationPrincipal PrincipalDetail principalDetail) {
        if (principalDetail != null) {
            dto.setWriter(principalDetail.getUsername());
        }

        csBoardService.createQBoard(dto);
        return "redirect:/csboard/list";
    }

    // ë¬¸ì˜ ëª©ë¡ í‘œì‹œ
    @GetMapping("/list")
    public String showList(@RequestParam(required = false) String keyword,
                          @RequestParam(defaultValue = "0") int page,
                          Model model) {
        // í˜ì´ì§• ì²˜ë¦¬
        Pageable pageable = PageRequest.of(page, 10);

        // ê²€ìƒ‰ ë˜ëŠ” ì „ì²´ ì¡°íšŒ
        Page<CSBoardDTO> csPage;
        if (keyword != null && !keyword.isEmpty()) {
            csPage = csBoardService.searchCSByTitle(keyword, pageable);
        } else {
            csPage = csBoardService.getCSPage(pageable);
        }

        // í˜ì´ì§• ì •ë³´ ê³„ì‚°
        int totalPages = csPage.getTotalPages();

        // ëª¨ë¸ì— ë°ì´í„° ì¶”ê°€
        model.addAttribute("csPage", csPage);
        model.addAttribute("currentPage", page);
        model.addAttribute("totalPages", totalPages);
        model.addAttribute("keyword", keyword);

        return "csboard/list";
    }

    // ë¬¸ì˜ ìƒì„¸ ì¡°íšŒ
    @GetMapping("/view")
    public String view(@RequestParam Long id, Model model, @AuthenticationPrincipal PrincipalDetail principalDetail) {
        // ë¬¸ì˜ ì •ë³´ ì¡°íšŒ (ì¡°íšŒìˆ˜ ì¦ê°€)
        CSBoardDTO dto = csBoardService.getBoard(id, true);

        // ë‹µë³€ ëª©ë¡ ì¡°íšŒ
        List<CSBoardReplyDTO> replies = csBoardReplyService.getRepliesByCSBoard(id);

        // ë‹µë³€ ê¶Œí•œ í™•ì¸
        boolean canReply = false;
        if (principalDetail != null) {
            String username = principalDetail.getUsername();
            // ì›ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìì¸ ê²½ìš° ë‹µë³€ ê°€ëŠ¥
            canReply = username.equals(dto.getWriter()) || principalDetail.getUser().getRole().equals("ADMIN");
        }

        // ëª¨ë¸ì— ë°ì´í„° ì¶”ê°€
        model.addAttribute("cs", dto);
        model.addAttribute("replies", replies);
        model.addAttribute("canReply", canReply);

        return "csboard/view";
    }

    // ê¸°íƒ€ ë©”ì†Œë“œ ìƒëµ...
}
```

## 8. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë° ê´€ê³„

CSBoard ì‹œìŠ¤í…œì˜ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì™€ ì—”í‹°í‹° ê°„ ê´€ê³„ì— ëŒ€í•œ ìƒì„¸ ë‚´ìš©ì…ë‹ˆë‹¤.

### 8.1 í…Œì´ë¸” êµ¬ì¡°

#### 8.1.1 cs_board í…Œì´ë¸”

cs_board í…Œì´ë¸”ì€ ë¬¸ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤:

```sql
CREATE TABLE cs_board (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    writer VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    hitcount BIGINT,
    secret BOOLEAN DEFAULT FALSE,
    regdate DATETIME NOT NULL
);
```

#### 8.1.2 csboard_reply í…Œì´ë¸”

csboard_reply í…Œì´ë¸”ì€ ë¬¸ì˜ì— ëŒ€í•œ ë‹µë³€ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤:

```sql
CREATE TABLE csboard_reply (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    csboard_id BIGINT NOT NULL,
    content VARCHAR(1000) NOT NULL,
    writer VARCHAR(255) NOT NULL,
    user_id BIGINT,
    reg_date DATETIME NOT NULL,
    update_date DATETIME,
    FOREIGN KEY (csboard_id) REFERENCES cs_board(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### 8.2 ì—”í‹°í‹° ê´€ê³„

CSBoard ì‹œìŠ¤í…œì˜ ì£¼ìš” ì—”í‹°í‹° ê°„ ê´€ê³„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

1. **CSBoardEntityì™€ CSBoardReplyEntityì˜ ê´€ê³„**:
   - ì¼ëŒ€ë‹¤(OneToMany) ê´€ê³„: í•˜ë‚˜ì˜ ë¬¸ì˜ì— ì—¬ëŸ¬ ë‹µë³€ì´ ìˆì„ ìˆ˜ ìˆìŒ
   - CSBoardReplyEntityì—ì„œ `@ManyToOne` ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ CSBoardEntity ì°¸ì¡°

2. **CSBoardReplyEntityì™€ UserEntityì˜ ê´€ê³„**:
   - ë‹¤ëŒ€ì¼(ManyToOne) ê´€ê³„: í•œ ì‚¬ìš©ìê°€ ì—¬ëŸ¬ ë‹µë³€ì„ ì‘ì„±í•  ìˆ˜ ìˆìŒ
   - CSBoardReplyEntityì—ì„œ `@ManyToOne` ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ UserEntity ì°¸ì¡°

### 8.3 ì¸ë±ì‹± ì „ëµ

íš¨ìœ¨ì ì¸ ì¿¼ë¦¬ ì„±ëŠ¥ì„ ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì¸ë±ìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤:

1. **cs_board í…Œì´ë¸” ì¸ë±ìŠ¤**:
   - `title`: ì œëª© ê¸°ë°˜ ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ
   - `writer`: ì‘ì„±ì ê¸°ë°˜ ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ
   - `regdate`: ë‚ ì§œ ê¸°ì¤€ ì •ë ¬ ì„±ëŠ¥ í–¥ìƒ

2. **csboard_reply í…Œì´ë¸” ì¸ë±ìŠ¤**:
   - `csboard_id`: íŠ¹ì • ë¬¸ì˜ì˜ ë‹µë³€ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
   - `user_id`: íŠ¹ì • ì‚¬ìš©ìì˜ ë‹µë³€ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
   - `reg_date`: ë‚ ì§œ ê¸°ì¤€ ì •ë ¬ ì„±ëŠ¥ í–¥ìƒ

## 9. ë‹¤ë¥¸ ì‹œìŠ¤í…œê³¼ì˜ í†µí•©

CSBoard ì‹œìŠ¤í…œì€ ë‹¤ë¥¸ ì‹œìŠ¤í…œê³¼ í†µí•©ë˜ì–´ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¼ë¶€ë¡œ ì‘ë™í•©ë‹ˆë‹¤.

### 9.1 ì‚¬ìš©ì ê´€ë¦¬ ì‹œìŠ¤í…œê³¼ì˜ í†µí•©

CSBoard ì‹œìŠ¤í…œì€ ì‚¬ìš©ì ê´€ë¦¬ ì‹œìŠ¤í…œê³¼ í†µí•©ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

1. **ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ í™•ì¸**:
   - Spring Securityë¥¼ í†µí•œ ì‚¬ìš©ì ì¸ì¦
   - PrincipalDetail ê°ì²´ë¥¼ í†µí•œ ì‚¬ìš©ì ì •ë³´ ì ‘ê·¼
   - ì‚¬ìš©ì ì—­í• (Role)ì— ë”°ë¥¸ ê¶Œí•œ ê´€ë¦¬

2. **ì‚¬ìš©ì í”„ë¡œí•„ ì—°ë™**:
   - ë¬¸ì˜ ë° ë‹µë³€ ì‘ì„± ì‹œ í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ ì‚¬ìš©
   - ì‚¬ìš©ì í”„ë¡œí•„ í˜ì´ì§€ì—ì„œ ì‘ì„±í•œ ë¬¸ì˜ ë° ë‹µë³€ ëª©ë¡ í‘œì‹œ

### 9.2 ì•Œë¦¼ ì‹œìŠ¤í…œê³¼ì˜ í†µí•©

CSBoard ì‹œìŠ¤í…œì€ ì•Œë¦¼ ì‹œìŠ¤í…œê³¼ í†µí•©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. **ìƒˆ ë‹µë³€ ì•Œë¦¼**:
   - ë¬¸ì˜ ì‘ì„±ìì—ê²Œ ìƒˆ ë‹µë³€ ì‘ì„± ì‹œ ì•Œë¦¼ ë°œì†¡
   - ê´€ë¦¬ìì—ê²Œ ìƒˆ ë¬¸ì˜ ë“±ë¡ ì‹œ ì•Œë¦¼ ë°œì†¡

2. **ìƒíƒœ ë³€ê²½ ì•Œë¦¼**:
   - ë¬¸ì˜ ì²˜ë¦¬ ìƒíƒœ ë³€ê²½ ì‹œ ì‘ì„±ìì—ê²Œ ì•Œë¦¼ ë°œì†¡
   - ë‹µë³€ ìˆ˜ì • ì‹œ ê´€ë ¨ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ ë°œì†¡

### 9.3 ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œì™€ì˜ í†µí•©

CSBoard ì‹œìŠ¤í…œì€ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œì™€ í†µí•©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. **ë¬¸ì˜ í†µê³„ ì œê³µ**:
   - ê¸°ê°„ë³„ ë¬¸ì˜ ìˆ˜ í†µê³„
   - ì¹´í…Œê³ ë¦¬ë³„ ë¬¸ì˜ ë¶„í¬
   - ë¯¸ë‹µë³€ ë¬¸ì˜ ìˆ˜ ë° ë¹„ìœ¨

2. **ê´€ë¦¬ì ì‘ì—… ë„êµ¬**:
   - ì¼ê´„ ë‹µë³€ ì²˜ë¦¬ ê¸°ëŠ¥
   - ë¬¸ì˜ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬
   - ìì£¼ ë¬»ëŠ” ì§ˆë¬¸(FAQ) ê´€ë¦¬

### 9.4 ê²€ìƒ‰ ì‹œìŠ¤í…œê³¼ì˜ í†µí•©

CSBoard ì‹œìŠ¤í…œì€ ê²€ìƒ‰ ì‹œìŠ¤í…œê³¼ í†µí•©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. **í†µí•© ê²€ìƒ‰ ì§€ì›**:
   - ì‚¬ì´íŠ¸ ì „ì²´ ê²€ìƒ‰ì— ë¬¸ì˜ ë° ë‹µë³€ í¬í•¨
   - ê²€ìƒ‰ ê²°ê³¼ì— ë¬¸ì˜ ì œëª© ë° ë‚´ìš© í‘œì‹œ

2. **ê³ ê¸‰ ê²€ìƒ‰ ê¸°ëŠ¥**:
   - ë‚ ì§œ ë²”ìœ„ ê²€ìƒ‰
   - ì‘ì„±ì ê¸°ë°˜ ê²€ìƒ‰
   - ë‹µë³€ ìƒíƒœ ê¸°ë°˜ ê²€ìƒ‰

## 10. ì„±ëŠ¥ ìµœì í™” ë° í™•ì¥ì„±

CSBoard ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ ìµœì í™” ë° í™•ì¥ì„±ì— ëŒ€í•œ ìƒì„¸ ë‚´ìš©ì…ë‹ˆë‹¤.

### 10.1 í˜ì´ì§• ë° ìºì‹±

1. **í˜ì´ì§• ì²˜ë¦¬**:
   - Spring Data JPAì˜ Pageable ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•œ íš¨ìœ¨ì ì¸ í˜ì´ì§•
   - í•œ ë²ˆì— ë¡œë“œë˜ëŠ” ë°ì´í„° ì–‘ ì œí•œìœ¼ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”

2. **ìºì‹± ì „ëµ**:
   - ìì£¼ ì¡°íšŒë˜ëŠ” ë¬¸ì˜ ëª©ë¡ ìºì‹±
   - í†µê³„ ë°ì´í„° ìºì‹±
   - ìºì‹œ ë¬´íš¨í™” ì „ëµ êµ¬í˜„

### 10.2 ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”

1. **ì¸ë±ìŠ¤ ìµœì í™”**:
   - ìì£¼ ì‚¬ìš©ë˜ëŠ” ê²€ìƒ‰ ì¡°ê±´ì— ì¸ë±ìŠ¤ ì„¤ì •
   - ë³µí•© ì¸ë±ìŠ¤ë¥¼ í†µí•œ ì¿¼ë¦¬ ì„±ëŠ¥ í–¥ìƒ

2. **ì¿¼ë¦¬ ìµœì í™”**:
   - N+1 ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ì¡°ì¸ í˜ì¹˜(Join Fetch) ì‚¬ìš©
   - í˜ì´ì§• ì¿¼ë¦¬ ìµœì í™”
   - ë¶ˆí•„ìš”í•œ ë°ì´í„° ë¡œë”© ë°©ì§€

### 10.3 í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

1. **ìˆ˜í‰ì  í™•ì¥**:
   - ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¡œì˜ ì „í™˜ ê°€ëŠ¥ì„±
   - ì„œë¹„ìŠ¤ ë¶„ë¦¬ë¥¼ í†µí•œ ë…ë¦½ì  í™•ì¥

2. **ìˆ˜ì§ì  í™•ì¥**:
   - ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
   - ë³‘ëª© ì§€ì  ì‹ë³„ ë° ìµœì í™”
   - í•˜ë“œì›¨ì–´ ë¦¬ì†ŒìŠ¤ ì¦ì„¤ ê³„íš

### 10.4 ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

1. **ì„±ëŠ¥ ì§€í‘œ ìˆ˜ì§‘**:
   - ì‘ë‹µ ì‹œê°„ ëª¨ë‹ˆí„°ë§
   - ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
   - ì‚¬ìš©ì ê²½í—˜ ì§€í‘œ ìˆ˜ì§‘

2. **ë¡œê¹… ë° ë¶„ì„**:
   - ì˜¤ë¥˜ ë¡œê¹… ë° ì•Œë¦¼
   - ì„±ëŠ¥ ë³‘ëª© í˜„ìƒ ë¶„ì„
   - ì‚¬ìš© íŒ¨í„´ ë¶„ì„ì„ í†µí•œ ìµœì í™” ë°©í–¥ ë„ì¶œ

### 10.5 ë¶€í•˜ í…ŒìŠ¤íŠ¸

1. **ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ í…ŒìŠ¤íŠ¸**:
   - ì¼ë°˜ì ì¸ ì‚¬ìš© íŒ¨í„´ ì‹œë®¬ë ˆì´ì…˜
   - í”¼í¬ ì‹œê°„ëŒ€ ë¶€í•˜ ì‹œë®¬ë ˆì´ì…˜
   - ê·¹ë‹¨ì  ìƒí™© í…ŒìŠ¤íŠ¸

2. **ì„±ëŠ¥ ê°œì„  ì‚¬ì´í´**:
   - í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¶„ì„
   - ë³‘ëª© ì§€ì  ì‹ë³„ ë° ê°œì„ 
   - ê°œì„  íš¨ê³¼ ê²€ì¦ì„ ìœ„í•œ ì¬í…ŒìŠ¤íŠ¸

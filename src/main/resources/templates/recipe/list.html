<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout.html}" lang="en">
<div class="container-fluid text-white p-5" layout:fragment="content">
    <section class="page-section">
        <div class="container">
            <div class="card bg-dark text-white mb-4 shadow-lg rounded-4 overflow-hidden">
                <div class="card-body p-4">
                    <h2 class="text-center fw-bold mb-4 fs-1">üç± Ï†ÑÏ≤¥ Î†àÏãúÌîº Î™©Î°ù</h2>
                    <hr class="divider my-4" />

                    <!-- Ïπ¥ÌÖåÍ≥†Î¶¨ Í≤ÄÏÉâ Î¶¨Ïä§Ìä∏ -->
                    <div class="d-flex flex-wrap justify-content-center mb-4 gap-2">
                        <a href="/recipe/list" class="btn btn-secondary rounded-pill fw-semibold px-3">Ï†ÑÏ≤¥</a>
                        <a href="/recipe/list?category=Î∞•" class="btn btn-secondary rounded-pill fw-semibold px-3">Î∞•</a>
                        <a href="/recipe/list?category=Íµ≠" class="btn btn-secondary rounded-pill fw-semibold px-3">Íµ≠</a>
                        <a href="/recipe/list?category=Î©îÏù∏Î∞òÏ∞¨" class="btn btn-secondary rounded-pill fw-semibold px-3">Î©îÏù∏Î∞òÏ∞¨</a>
                        <a href="/recipe/list?category=Î∞ëÎ∞òÏ∞¨" class="btn btn-secondary rounded-pill fw-semibold px-3">Î∞ëÎ∞òÏ∞¨</a>
                        <a href="/recipe/list?category=Î©¥" class="btn btn-secondary rounded-pill fw-semibold px-3">Î©¥</a>
                    </div>

                    <!-- Í≤ÄÏÉâ -->
                    <form method="get" action="/recipe/list" class="d-flex justify-content-center mb-4">
                        <!-- Ïπ¥ÌÖåÍ≥†Î¶¨ hidden ÌïÑÎìú Ï∂îÍ∞Ä -->
                        <input type="hidden" name="category" th:value="${param.category}" />

                        <div class="input-group" style="max-width: 600px;">
                            <select name="searchType" class="form-select rounded-start rounded-pill border-end-0">
                                <option value="title">Ï†úÎ™©</option>
                                <option value="writer">ÏûëÏÑ±Ïûê</option>
                            </select>
                            <input type="text" name="keyword" class="form-control border-start-0 border-end-0" placeholder="Í≤ÄÏÉâÏñ¥ ÏûÖÎ†•">
                            <button type="submit" class="btn btn-primary rounded-end rounded-pill fw-semibold px-3">Í≤ÄÏÉâ</button>
                        </div>
                    </form>

                    <!-- Ï†ÑÏ≤¥ Î†àÏãúÌîº Î¶¨Ïä§Ìä∏ -->
                    <div class="row g-4">
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" th:each="recipe : ${recipeList}">
                            <div class="card h-100 shadow-sm border-0 bg-dark text-white rounded-3 overflow-hidden">
                                <div class="position-relative">
                                    <img th:src="${recipe.mainImagePath}" class="card-img-top" alt="Î†àÏãúÌîº Ïù¥ÎØ∏ÏßÄ"
                                         style="height: 160px; object-fit: cover;" />
                                    <span class="position-absolute top-0 end-0 badge bg-primary m-2 rounded-pill px-2 py-1" 
                                          th:text="${recipe.category}">Ïπ¥ÌÖåÍ≥†Î¶¨</span>
                                </div>
                                <div class="card-body p-3">
                                    <h5 class="card-title fw-bold text-truncate mb-2" th:text="${recipe.title}">Î†àÏãúÌîº Ï†úÎ™©</h5>
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span class="text-light" th:text="${recipe.username}">ÏûëÏÑ±Ïûê</span>
                                        <span class="text-light" th:text="${#temporals.format(recipe.createdAt, 'yyyy-MM-dd')}">Îì±Î°ùÏùº</span>
                                    </div>
                                    <div class="text-warning fw-bold" th:text="'‚≠ê ' + ${recipe.averageRating}">ÌèâÍ∑† Î≥ÑÏ†ê</div>
                                </div>
                                <div class="card-footer text-center bg-transparent border-0 pb-3">
                                    <a th:href="@{/recipe/view(id=${recipe.id})}" class="btn btn-outline-light rounded-pill fw-semibold w-100">
                                        ÏûêÏÑ∏Ìûà Î≥¥Í∏∞
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-5 text-center">
                        <a href="/recipe/register" class="btn btn-primary btn-lg rounded-pill fw-semibold px-4">
                            <i class="bi bi-plus-circle me-2"></i>Î†àÏãúÌîº Îì±Î°ù
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

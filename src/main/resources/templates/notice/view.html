<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout.html}" lang="ko">

<div class="container py-5" layout:fragment="content">
    <section class="page-section">
        <div class="container">
            <div class="card mx-auto shadow-lg border-0 rounded-4 p-5 bg-white" style="max-width: 760px;">
                <div class="card-body">
                    <h2 class="text-primary fw-bold text-center mb-4 fs-1">📘 공지사항 상세보기</h2>

                    <div class="mb-4">
                        <div class="small fw-semibold text-secondary mb-1">제목</div>
                        <div class="p-3 bg-light rounded-3 fs-5" th:text="${notice.title}">공지 제목</div>
                    </div>

                    <div class="mb-4">
                        <div class="small fw-semibold text-secondary mb-1">작성자</div>
                        <div class="p-3 bg-light rounded-3 fs-5" th:text="${notice.writer}">작성자</div>
                    </div>

                    <div class="mb-4">
                        <div class="small fw-semibold text-secondary mb-1">중요도</div>
                        <div class="p-3 bg-light rounded-3">
                            <span th:class="${notice.important} ? 'badge bg-danger rounded-pill px-3 py-2' : 'badge bg-secondary rounded-pill px-3 py-2'"
                                  th:text="${notice.important} ? '중요 공지' : '일반 공지'">일반 공지</span>
                        </div>
                    </div>

                    <div class="mb-4">
                        <div class="small fw-semibold text-secondary mb-1">내용</div>
                        <div class="p-3 bg-light rounded-3 fs-5" style="white-space: pre-wrap;" th:text="${notice.content}">공지 내용</div>
                    </div>

                    <input type="hidden" id="noticeId" th:value="${notice.id}" />

                    <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mt-4">
                        <a href="/notice/list" class="btn btn-outline-secondary rounded-pill fw-semibold">← 목록으로</a>
                        <div>
                            <a th:href="@{'/notice/update?id=' + ${notice.id}}" class="btn btn-outline-dark rounded-pill fw-semibold me-2">✏ 수정</a>
                            <button class="btn btn-danger rounded-pill fw-semibold" onclick="deleteNotice()">🗑 삭제</button>
                        </div>
                    </div>
                </div>
            </div>

            <script>
                function deleteNotice() {
                    const id = document.getElementById("noticeId").value;
                    if (confirm("정말 삭제하시겠습니까?")) {
                        fetch("/notice/delete/" + id, {
                            method: "DELETE"
                        }).then(res => {
                            if (res.ok) {
                                alert("삭제되었습니다.");
                                window.location.href = "/notice/list";
                            } else {
                                alert("삭제에 실패했습니다.");
                            }
                        });
                    }
                }
            </script>
        </div>
    </section>
</div>
</html>
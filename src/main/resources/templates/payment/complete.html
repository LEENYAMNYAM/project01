<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout.html}" lang="en">
<div class="container-fluid text-white p-5" layout:fragment="content"
     style="background-image: url('/assets/recipeimg/bg-main3.png'); background-size: cover; background-position: center; background-color: rgba(0,0,0,0.5); background-blend-mode: darken;">
    <section class="page-section">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="mt-0">π‰ κ²°μ  μ™„λ£</h2>
                <hr class="divider my-4" />
                <p class="lead">μ£Όλ¬Έμ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤. κ°μ‚¬ν•©λ‹λ‹¤!</p>
            </div>

            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <!-- μ£Όλ¬Έ μ™„λ£ μ •λ³΄ -->
                    <div class="card bg-dark text-white mb-4">
                        <div class="card-header">
                            <h3>μ£Όλ¬Έ μ •λ³΄</h3>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-4 fw-bold">μ£Όλ¬Έ λ²νΈ:</div>
                                <div class="col-md-8" th:text="${order.orderNumber}">ORD-20230101-001234</div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-4 fw-bold">μ£Όλ¬Έ μΌμ‹:</div>
                                <div class="col-md-8" th:text="${#temporals.format(order.orderDate, 'yyyy-MM-dd HH:mm:ss')}">2023-01-01 12:34:56</div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-4 fw-bold">κ²°μ  κΈμ•΅:</div>
                                <div class="col-md-8" th:text="${#numbers.formatInteger(order.totalAmount, 0, 'COMMA')} + 'μ›'">50,000μ›</div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-4 fw-bold">κ²°μ  λ°©λ²•:</div>
                                <div class="col-md-8" th:text="${order.paymentMethod}">μ‹ μ©μΉ΄λ“</div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-4 fw-bold">λ°°μ†΅μ§€:</div>
                                <div class="col-md-8">
                                    <div th:text="${order.shippingAddress}">μ„μΈμ‹ κ°•λ‚¨κµ¬ ν…ν—¤λ€λ΅ 123</div>
                                    <div th:if="${order.shippingAddressDetail}" th:text="${order.shippingAddressDetail}">μƒμ„Έμ£Όμ†</div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-4 fw-bold">λ°°μ†΅ μ”μ²­μ‚¬ν•­:</div>
                                <div class="col-md-8" th:text="${order.deliveryRequest}">λ¬Έ μ•μ— λ†“μ•„μ£Όμ„Έμ”</div>
                            </div>
                        </div>
                    </div>

                    <!-- μ£Όλ¬Έ μƒν’ λ©λ΅ -->
                    <div class="card bg-dark text-white mb-4">
                        <div class="card-header">
                            <h3>μ£Όλ¬Έ μƒν’</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-dark">
                                    <thead>
                                        <tr>
                                            <th>μƒν’λ…</th>
                                            <th>μλ‰</th>
                                            <th>κ°€κ²©</th>
                                            <th>ν•©κ³„</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="item : ${order.orderItems}">
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img th:if="${item.ingredient.imageUrl}" th:src="${item.ingredient.imageUrl}" 
                                                         class="me-2" style="width: 40px; height: 40px; object-fit: cover;">
                                                    <span th:text="${item.ingredient.ingredientName}">μ¬λ£λ…</span>
                                                </div>
                                            </td>
                                            <td th:text="${item.quantity}">1</td>
                                            <td th:text="${#numbers.formatInteger(item.ingredient.price, 0, 'COMMA')} + 'μ›'">10,000μ›</td>
                                            <td th:text="${#numbers.formatInteger(item.ingredient.price * item.quantity, 0, 'COMMA')} + 'μ›'">10,000μ›</td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td colspan="3" class="text-end"><strong>μƒν’ κΈμ•΅:</strong></td>
                                            <td th:text="${#numbers.formatInteger(order.itemsAmount, 0, 'COMMA')} + 'μ›'">45,000μ›</td>
                                        </tr>
                                        <tr>
                                            <td colspan="3" class="text-end"><strong>λ°°μ†΅λΉ„:</strong></td>
                                            <td th:text="${#numbers.formatInteger(order.shippingFee, 0, 'COMMA')} + 'μ›'">3,000μ›</td>
                                        </tr>
                                        <tr>
                                            <td colspan="3" class="text-end"><strong>ν¬μΈνΈ μ‚¬μ©:</strong></td>
                                            <td th:text="'-' + ${#numbers.formatInteger(order.usedPoints, 0, 'COMMA')} + 'μ›'">-1,000μ›</td>
                                        </tr>
                                        <tr>
                                            <td colspan="3" class="text-end"><strong>μ΄ κ²°μ  κΈμ•΅:</strong></td>
                                            <td th:text="${#numbers.formatInteger(order.totalAmount, 0, 'COMMA')} + 'μ›'">47,000μ›</td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- μ λ¦½ ν¬μΈνΈ μ •λ³΄ -->
                    <div class="card bg-dark text-white mb-4">
                        <div class="card-header">
                            <h3>ν¬μΈνΈ μ •λ³΄</h3>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-4 fw-bold">μ‚¬μ© ν¬μΈνΈ:</div>
                                <div class="col-md-8" th:text="${order.usedPoints} + ' ν¬μΈνΈ'">1,000 ν¬μΈνΈ</div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-4 fw-bold">μ λ¦½ ν¬μΈνΈ:</div>
                                <div class="col-md-8" th:text="${order.earnedPoints} + ' ν¬μΈνΈ'">470 ν¬μΈνΈ</div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-4 fw-bold">ν„μ¬ λ³΄μ  ν¬μΈνΈ:</div>
                                <div class="col-md-8" th:text="${user.points} + ' ν¬μΈνΈ'">2,470 ν¬μΈνΈ</div>
                            </div>
                        </div>
                    </div>

                    <!-- λ²„νΌ -->
                    <div class="text-center mt-4">
                        <a href="/mypage/orders" class="btn btn-primary me-2">μ£Όλ¬Έ λ‚΄μ—­ ν™•μΈ</a>
                        <a href="/recipe/list" class="btn btn-secondary">λ μ‹ν”Ό κ²€μƒ‰</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<script layout:fragment="script" th:if="${order != null}">
    alert("μ΄ κ²°μ  κΈμ•΅μ€ [[${order.totalAmount}]]μ›μ…λ‹λ‹¤.\nμ •μƒ κ²°μ λμ—μµλ‹λ‹¤.");
</script>
